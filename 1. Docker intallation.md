# Docker O‘rnatish Yo‘riqnomasi (Ubuntu Server uchun, 2026-yil holatiga mos)

Bu fayl Docker-ni Ubuntu serverga **rasmiy usulda** bosqichma-bosqich o‘rnatish bo‘yicha to‘liq qo‘llanma.

**Muhim eslatmalar:**
- Barcha buyruqlarni **root** sifatida bajaring (yoki har bir buyruq oldiga `sudo` qo‘ying).
- Siz allaqachon `sudo su` bilan root bo‘lib ishlayapsiz.
- Agar xato chiqsa: `cat /etc/os-release` natijasini va xato matnini yozing.

## 1-qadam: Eski va konfliktli Docker paketlarini tozalash
```bash
apt update
apt remove docker docker-engine docker.io containerd runc podman buildah -y
apt autoremove -y
```

## 2-qadam: Kerakli asosiy paketlarni o‘rnatish
```bash
apt update
apt install -y ca-certificates curl gnupg lsb-release
```

## 3-qadam: Docker rasmiy GPG kalitini qo‘shish
```bash
install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
chmod a+r /etc/apt/keyrings/docker.asc
```

## 4-qadam: Docker repository-ni qo‘shish
```bash
echo \\
  "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu \\
  $(lsb_release -cs) stable" | \\
  tee /etc/apt/sources.list.d/docker.list > /dev/null
```

**Agar `lsb_release -cs` ishlamasa:**
```bash
cat /etc/os-release
```
Codename-ni (masalan: noble, jammy) qo‘lda yozing.

## 5-qadam: Paketlarni yangilash va Docker-ni o‘rnatish
```bash
apt update
apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin
```

## 6-qadam: Docker servisini ishga tushirish
```bash
systemctl enable docker
systemctl start docker
systemctl status docker
```

## 7-qadam: Test qilish
```bash
docker --version
docker run hello-world
```

Muvaffaqiyatli bo‘lsa: "Hello from Docker!" chiqadi.

## 8-qadam: Oddiy user bilan sudo siz ishlatish (masalan arab)
```bash
groupadd docker          # agar yo‘q bo‘lsa
usermod -aG docker arab
usermod -aG docker friday   # ixtiyoriy
newgrp docker            # yoki terminalni qayta oching
```

Keyin oddiy user sifatida:
```bash
su - arab
docker run hello-world
```

## Tez bir martalik skript (copy-paste uchun)
```bash
#!/bin/bash
set -e

apt update && apt remove docker docker-engine docker.io containerd runc podman buildah -y
apt install -y ca-certificates curl gnupg lsb-release

install -m 0755 -d /etc/apt/keyrings
curl -fsSL https://download.docker.com/linux/ubuntu/gpg -o /etc/apt/keyrings/docker.asc
chmod a+r /etc/apt/keyrings/docker.asc

echo "deb [arch=$(dpkg --print-architecture) signed-by=/etc/apt/keyrings/docker.asc] https://download.docker.com/linux/ubuntu $(lsb_release -cs) stable" | tee /etc/apt/sources.list.d/docker.list > /dev/null

apt update
apt install -y docker-ce docker-ce-cli containerd.io docker-buildx-plugin docker-compose-plugin

systemctl enable --now docker

groupadd docker || true
usermod -aG docker arab
newgrp docker || true

echo "Docker o‘rnatildi. Test: docker run hello-world"
```

Faylni saqlash uchun:
1. Ushbu matnni copy qiling
2. Serverda: `nano docker-install.md` yoki `vi docker-install.md`
3. Paste qiling → Ctrl+O → Enter → Ctrl+X
4. Yoki kompyuteringizda .md fayl yaratib, keyin serverga yuklang (scp yoki wget orqali)
